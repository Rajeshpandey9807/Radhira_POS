@{
    ViewData["Title"] = "Add New Product";
}

@using Microsoft.AspNetCore.Mvc.Rendering
@model PosApp.Web.Features.Inventory.ProductCreatePageModel

<header class="page-header">
    <div class="page-header__copy">
        <p class="eyebrow">Item</p>
        <h2>Add New Product</h2>
        <p>Create a new product with pricing, GST, and stock details.</p>
    </div>
    <div class="page-header__actions">
        <a asp-controller="Items" asp-action="Inventory" class="btn ghost">Back to Inventory</a>
    </div>
</header>

<nav class="steps" aria-label="Product form steps">
    <ol class="steps__list">
        <li class="steps__item is-active">
            <span class="steps__dot" aria-hidden="true"></span>
            <span class="steps__label">Basic Details</span>
        </li>
        <li class="steps__item">
            <span class="steps__dot" aria-hidden="true"></span>
            <span class="steps__label">Advanced Details</span>
        </li>
    </ol>
</nav>

<form class="form" asp-controller="Items" asp-action="Create" method="post" aria-label="Add new product">
    @Html.AntiForgeryToken()

    <div class="card">
        <div asp-validation-summary="ModelOnly" class="help-text"></div>
    </div>

    <fieldset class="card">
        <legend class="card__legend">SECTION 1: Basic Details</legend>

        <div class="form-grid">
            <div class="field">
                <label asp-for="Form.ProductTypeId"></label>
                <select asp-for="Form.ProductTypeId" asp-items="@(new SelectList(Model.ProductTypes, "Id", "Name", Model.Form.ProductTypeId))" required>
                    <option value="" disabled selected="@(Model.Form.ProductTypeId is null ? "selected" : null)">Select product type</option>
                </select>
                <span asp-validation-for="Form.ProductTypeId" class="help-text"></span>
            </div>

            <div class="field">
                <label asp-for="Form.CategoryId"></label>
                <select asp-for="Form.CategoryId" asp-items="@(new SelectList(Model.Categories, "Id", "Name", Model.Form.CategoryId))" required>
                    <option value="" disabled selected="@(Model.Form.CategoryId is null ? "selected" : null)">Select category</option>
                </select>
                <span asp-validation-for="Form.CategoryId" class="help-text"></span>
            </div>

            <div class="field">
                <label asp-for="Form.ItemName"></label>
                <input asp-for="Form.ItemName" type="text" placeholder="e.g., Premium A4 Paper" required />
                <span asp-validation-for="Form.ItemName" class="help-text"></span>
            </div>

            <div class="field">
                <label asp-for="Form.SalesPrice"></label>
                <input asp-for="Form.SalesPrice" type="number" inputmode="decimal" step="0.01" min="0" placeholder="0.00" required />
                <span asp-validation-for="Form.SalesPrice" class="help-text"></span>
            </div>

            <div class="field">
                <label asp-for="Form.GstRateId"></label>
                <select asp-for="Form.GstRateId" required>
                    <option value="" disabled selected="@(Model.Form.GstRateId is null ? "selected" : null)">Select GST rate</option>
                    <option value="0">0%</option>
                    <option value="5">5%</option>
                    <option value="12">12%</option>
                    <option value="18">18%</option>
                    <option value="28">28%</option>
                </select>
                <span asp-validation-for="Form.GstRateId" class="help-text"></span>
            </div>

            <div class="field">
                <label asp-for="Form.UnitId"></label>
                <select asp-for="Form.UnitId" asp-items="@(new SelectList(Model.Units, "Id", "Name", Model.Form.UnitId))">
                    <option value="" disabled selected="@(Model.Form.UnitId is null ? "selected" : null)">Select unit</option>
                </select>
                <span asp-validation-for="Form.UnitId" class="help-text"></span>
            </div>

            <div class="field">
                <label asp-for="Form.OpeningStock"></label>
                <input asp-for="Form.OpeningStock" type="number" inputmode="decimal" step="0.01" min="0" placeholder="0" />
                <span asp-validation-for="Form.OpeningStock" class="help-text"></span>
            </div>
        </div>
    </fieldset>

    <fieldset class="card">
        <legend class="card__legend">SECTION 2: Advanced Details</legend>

        <div class="split-grid">
            <section class="card card--sub" aria-label="Stock Details">
                <div class="card__header">
                    <h3 class="card__title">SUB-SECTION A: Stock Details</h3>
                    <p class="card__subtitle">Codes, description, unit, and as-of date.</p>
                </div>

                <div class="form-grid">
                    <div class="field">
                        <label asp-for="Form.ItemCode"></label>
                        <input asp-for="Form.ItemCode" type="text" placeholder="e.g., PAP-A4-80G" />
                        <p class="help-text">You can enter a custom code or use auto-generate.</p>
                        <span asp-validation-for="Form.ItemCode" class="help-text"></span>
                    </div>

                    <div class="field">
                        <label asp-for="Form.HSNCode"></label>
                        <input asp-for="Form.HSNCode" type="text" placeholder="e.g., 4802" />
                        <span asp-validation-for="Form.HSNCode" class="help-text"></span>
                    </div>

                    <div class="field">
                        <label asp-for="Form.AsOfDate"></label>
                        <input asp-for="Form.AsOfDate" type="date" />
                        <span asp-validation-for="Form.AsOfDate" class="help-text"></span>
                    </div>

                    <div class="field">
                        <label asp-for="Form.IsActive"></label>
                        <select asp-for="Form.IsActive">
                            <option value="true">Active</option>
                            <option value="false">Inactive</option>
                        </select>
                    </div>

                    <div class="field field--full">
                        <label asp-for="Form.Description"></label>
                        <textarea asp-for="Form.Description" rows="4" placeholder="Optional notes about this product"></textarea>
                        <span asp-validation-for="Form.Description" class="help-text"></span>
                    </div>
                </div>
            </section>

            <section class="card card--sub" aria-label="Pricing Details">
                <div class="card__header">
                    <h3 class="card__title">SUB-SECTION B: Pricing Details</h3>
                    <p class="card__subtitle">Sales, MRP, purchase, and GST.</p>
                </div>

                <div class="form-grid">
                    <div class="field">
                        <label asp-for="Form.PurchasePrice"></label>
                        <input asp-for="Form.PurchasePrice" type="number" inputmode="decimal" step="0.01" min="0" placeholder="0.00" />
                        <span asp-validation-for="Form.PurchasePrice" class="help-text"></span>
                    </div>

                    <div class="field">
                        <label asp-for="Form.MRP"></label>
                        <input asp-for="Form.MRP" type="number" inputmode="decimal" step="0.01" min="0" placeholder="0.00" />
                        <span asp-validation-for="Form.MRP" class="help-text"></span>
                    </div>

                    <div class="field">
                        <label class="help-text">Pricing note</label>
                        <p class="help-text">Sales Price and GST are set in Basic Details to keep billing consistent.</p>
                    </div>
                </div>
            </section>
        </div>

        <div class="action-bar" role="group" aria-label="Form actions">
            <div class="action-bar__left">
                <span class="hint">Tip: keep Item Code short and consistent.</span>
            </div>
            <div class="action-bar__right">
                <a asp-controller="Items" asp-action="Inventory" class="btn ghost">Cancel</a>
                <button type="submit" name="submitAction" value="save-new" class="btn ghost">Save &amp; New</button>
                <button type="submit" name="submitAction" value="save" class="btn primary">Save</button>
            </div>
        </div>
    </fieldset>
</form>
